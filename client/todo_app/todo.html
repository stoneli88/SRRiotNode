<todo>
  <h3>{opts.title}</h3>
  <ul>
    <li each={item.filter(filter)}>
      <label for="todo-checkbox" class={completed: done}>
        <input type="checkbox" checked={done} id="todo-checkbox"
          onclick={parent.toggle}>
      </label>
    </li>
  </ul>
  <form onsubmit={add}>
    <input type="button" name="input" onkeyup={edit}>
    <button disabled={!text}>Add #{items.filter(filter).length + 1}</button>
  </form>
  <script>
    thie.items = opts.items
    
    function edit(e) {
      this.text = e.target.value
    }

    function add(e) {
      if (this.text) {
        this.items.push({title: this.text})
        this.text = this.input.value = ""
      }
    }

    function filter(item) {
      var item = e.item
      item.done = !item.done
      return true
    }

    function toggle(e) {
      var item = e.item;
      item.done = !item.done;
      return true;
    }
  </script>
</todo>
